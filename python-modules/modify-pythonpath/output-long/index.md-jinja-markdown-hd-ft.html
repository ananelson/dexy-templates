<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<title>Dexy Example</title>

	<link href="http://assets.dexy.it/ata/css/zp-compressed.css" type="text/css" media="screen, print" rel="stylesheet" />
	<link href="http://assets.dexy.it/ata/css/zp-print.css" type="text/css" media="print" rel="stylesheet" />
	<link href="http://assets.dexy.it/pastie.css" type="text/css" media="screen, print" rel="stylesheet" />
	
	<!--[if IE]>
	<link href="http://assets.dexy.it/ata/css/zp-ie.css" type="text/css" media="screen" rel="stylesheet" />
	<![endif]-->

	<style type="text/css">
		.sidebar {
			font-size: 11px;
    }
		p.intro { 
			font-style: bold;
		} 
		
		.content .padding {
			padding: 0 36px 0 0;
		}
		
		.item .padding {
			padding: 0 12px 0 0;
		}
		
		.list-item h2 {
			margin: 0;
			line-height: 27px;
		}
		
	</style>
</head>
<body>

<div class="skip">
	<a href="#content" title="Go directly to page content">Go to page content</a>
</div>

<div class="zp-wrapper">
	<div class="zp-70 content">
		<div class="padding">

<h2>Working with Python Modules</h2>
<p>Here is a module we wish to include in our Dexy document:</p>
<div class="highlight"><pre><a name="demomodule.py|pyg-1"></a><span class="k">def</span> <span class="nf">abc</span><span class="p">():</span>
<a name="demomodule.py|pyg-2"></a>    <span class="k">return</span> <span class="mi">5</span>
</pre></div>

<p>And we want to call this in a script, like so:
<div class="highlight"><pre><a name="demo-script.py|idio-1"></a><span class="kn">import</span> <span class="nn">demomodule</span>
<a name="demo-script.py|idio-2"></a><span class="k">print</span> <span class="n">demomodule</span><span class="o">.</span><span class="n">abc</span><span class="p">()</span>
</pre></div></p>
<p>This works when you run this from the command line, but it won't work within Dexy. This is because Python looks for a file named demomodule.py somewhere in the pythonpath. The pythonpath automatically includes the "." directory, but when Dexy runs your file it actually runs a copy of your file sitting in the artifacts/ directory.</p>
<p>There are several ways to include your module. The best way is to put your module into a proper Python package and install this on your system. If you install this with the 'develop' option then any changes you make will appear straight away.</p>
<p>However, this might be overkill if you just have a small module. In this case the easiest thing to do is to add ".." to the pythonpath. you can do this like so:</p>
<div class="highlight"><pre><a name="demo-script.py|idio-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a name="demo-script.py|idio-2"></a><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;..&quot;</span><span class="p">)</span>
</pre></div>

<p>Because Dexy is running your python script in artifacts, this line adds your dexy project root to the pythonpath and so it will find your original file.</p>
<p>If you use idiopidae to divide your script into sections, then you don't need to show this part of the script. You can just show the interesting part:</p>
<div class="highlight"><pre><a name="demo-script.py|idio|pycon|pyg-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">demomodule</span>
<a name="demo-script.py|idio|pycon|pyg-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">demomodule</span><span class="o">.</span><span class="n">abc</span><span class="p">()</span>
<a name="demo-script.py|idio|pycon|pyg-3"></a><span class="go">5</span>
</pre></div>

<p>You should <a href="http://docs.python.org/tutorial/modules.html#the-module-search-path">read more</a> about Python module search paths if you try this.</p>
<p>It is possible for Dexy to be set up to do this automatically, if you are interested in this then you may wish to follow <a href="https://www.pivotaltracker.com/story/show/16163251">this story</a>.</p>
    </div>
  </div>
</div>

</body>
</html>
